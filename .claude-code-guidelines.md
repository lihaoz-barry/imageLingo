# Claude Code Agent Guidelines for imageLingo

## ğŸ¯ Purpose
This document specifies the mandatory workflow for Claude Code when working on imageLingo pull requests and features.

---

## ğŸ“‹ MANDATORY PR Submission Workflow

### When Creating Any PR or Feature Branch:

**You MUST follow this exact sequence before pushing to GitHub:**

#### Step 1: Run ESLint Check âœ…
```bash
npm run lint
```
- **MUST** result in: `âœ– X problems (0 errors, X warnings)`
- **MUST** have 0 ERRORS (warnings are acceptable)
- If errors found: Fix them immediately, don't proceed to next step

#### Step 2: Run TypeScript Check âœ…
```bash
npx tsc --noEmit
```
- **MUST** complete silently with exit code 0
- **MUST** show no compilation errors
- If errors found: Fix them, run tsc again, don't proceed to next step

#### Step 3: Run Test Suite âœ…
```bash
npm test
```
- **MUST** show: `Test Files [X] passed (X)` (all green)
- **MUST** show: `Tests [X] passed (X)` (all tests passing)
- **MUST** have 0 failing tests
- If tests fail: Debug and fix, rerun tests, don't proceed to next step

#### Step 4: Commit Changes âœ…
```bash
git add .
git commit -m "..."
```
- Only after ALL three checks pass
- Include meaningful commit message

#### Step 4: Push to Remote âœ…
```bash
git push origin <branch-name>
```
- Only after ALL checks pass locally
- Only after code is committed

#### Step 5: Create/Update PR âœ…
- Open GitHub PR from the feature branch
- Use meaningful title and description
- Reference related issues if applicable
- Link to PR in summary

---

## ğŸš« Actions FORBIDDEN Before Pushing

DO NOT push to remote if:
- âŒ ESLint has ANY errors (warnings are OK)
- âŒ TypeScript compilation fails
- âŒ Any tests are failing
- âŒ Code is not committed

**Pushing without passing all checks wastes time and violates this workflow.**

---

## ğŸ“Š Tests to Always Include

For any feature implementation:
- âœ… API route tests (if creating API endpoints)
- âœ… Component tests (if creating React components)
- âœ… Integration tests (if connecting multiple parts)
- âœ… Edge case tests (error handling, empty states, etc.)

---

## ğŸ“ Commit Message Format

```
type: description

- Bullet point 1
- Bullet point 2
- Bullet point 3

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>
```

**Types:** feat, fix, refactor, docs, test, perf, chore

---

## ğŸ”„ When Tests Fail

If any of the three checks fail:

1. **Read the error message carefully**
2. **Fix the issue in the code**
3. **Rerun the failing test**
4. **Verify it passes**
5. **Commit the fix**
6. **Only then push to remote**

---

## ğŸ“¦ For PR Creation Steps

Always in this order:
1. âœ… Run: `npm run lint`
2. âœ… Run: `npx tsc --noEmit`
3. âœ… Run: `npm test`
4. âœ… All pass? Then commit
5. âœ… Then push
6. âœ… Then create PR

**NEVER skip or reorder these steps.**

---

## ğŸ“ Reference Documents

- See `docs/PR_CHECKLIST.md` for detailed error fixes
- See `docs/` folder for other guidelines

---

## ğŸš€ Success Metrics

A good PR:
- âœ… Passes all local checks before pushing
- âœ… Passes all GitHub Actions CI/CD checks
- âœ… Has meaningful tests
- âœ… Has clear commit messages
- âœ… Includes relevant documentation

---

## âš¡ Quick Verification Command

Before every push, run:
```bash
npm run lint && npx tsc --noEmit && npm test
```

If all three commands succeed, you're ready to push! ğŸ‰

---

**Last Updated:** 2025-12-28
**Applicable To:** All PRs on imageLingo project
**Enforced By:** Claude Code Agent Guidelines
